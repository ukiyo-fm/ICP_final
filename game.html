<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Leadership Memory Cards â€“ ICP Portfolio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style-main.css">
</head>

<body>

    <header class="site-header">
        <div class="top-bar">
            <div class="logo-block">
                <img src="sdu_logo copy.jpg" class="logo" alt="SDU logo">
                <div class="header-text">
                    <h1>Leadership Memory Cards</h1>
                    <p>Match leadership approaches with their definitions</p>
                </div>
            </div>

            <button id="themeToggle" class="theme-toggle">ðŸŒ™</button>
        </div>

        <nav class="main-nav">
            <a href="index.html">Home</a>
            <a href="progress.html">My Progress</a>
            <a href="concepts.html">Leadership Concepts</a>
            <a href="cv.html">CV</a>
            <a href="game.html" class="active">Game</a>
            <a href="reflection.html">Reflection</a>
        </nav>
    </header>

    <main>
        <section class="reflection-block">
            <h2>How to Use This Game</h2>
            <p>
                Each pair is made of a <strong>leadership approach</strong> and a
                <strong>short explanation</strong>. Flip two cards to find a match.
                This helps me revise key approaches for the exam in a more active way.
            </p>
            <button id="restartGame" class="secondary-btn" style="margin-top:8px;">Restart game</button>
            <p id="gameStatus" class="game-status">Attempts: 0</p>
        </section>

        <section class="cards-section">
            <h2>Leadership Approaches Memory Grid</h2>
            <div id="gameGrid" class="memory-grid">
                <!-- Cards from JS -->
            </div>
            <p id="gameMessage" class="game-message"></p>
        </section>
    </main>

    <footer class="site-footer">
        <p>Â© 2025 Â· ICP Portfolio â€“ Shahida Kaiyrbek</p>
    </footer>

    <script>
        // DARK MODE
        const toggleBtn = document.getElementById("themeToggle");
        const body = document.body;
        const savedTheme = localStorage.getItem("theme");

        if (savedTheme === "dark") {
            body.classList.add("dark");
            toggleBtn.textContent = "â˜€ï¸";
        }

        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark");
            const isDark = body.classList.contains("dark");
            toggleBtn.textContent = isDark ? "â˜€ï¸" : "ðŸŒ™";
            localStorage.setItem("theme", isDark ? "dark" : "light");
        });

        // MEMORY GAME
        const pairs = [
            { id: "trait", text: "Trait approach", type: "term" },
            { id: "trait", text: "Focuses on leadersâ€™ stable characteristics like confidence and personality.", type: "definition" },

            { id: "skills", text: "Skills approach", type: "term" },
            { id: "skills", text: "Sees leadership as technical, human and conceptual skills that can be learned.", type: "definition" },

            { id: "behavioural", text: "Behavioural approach", type: "term" },
            { id: "behavioural", text: "Studies what leaders actually do: task and relationship behaviours.", type: "definition" },

            { id: "situational", text: "Situational approach", type: "term" },
            { id: "situational", text: "Leaders adapt their style to followersâ€™ development level and the situation.", type: "definition" },

            { id: "contingency", text: "Contingency approach", type: "term" },
            { id: "contingency", text: "Effectiveness depends on the match between style and context.", type: "definition" },

            { id: "pathgoal", text: "Pathâ€“Goal theory", type: "term" },
            { id: "pathgoal", text: "Leaders clarify goals, remove obstacles and choose a motivating style.", type: "definition" },

            { id: "transformational", text: "Transformational leadership", type: "term" },
            { id: "transformational", text: "Inspires followers with vision, values and personal development.", type: "definition" },

            { id: "servant", text: "Servant leadership", type: "term" },
            { id: "servant", text: "Puts followersâ€™ growth first and leads through service and empathy.", type: "definition" }
        ];

        const gameGrid = document.getElementById("gameGrid");
        const gameStatus = document.getElementById("gameStatus");
        const gameMessage = document.getElementById("gameMessage");
        const restartBtn = document.getElementById("restartGame");

        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let matchesFound = 0;
        let attempts = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createCardElement(cardData, index) {
            const card = document.createElement("div");
            card.classList.add("memory-card");
            card.dataset.id = cardData.id;
            card.dataset.type = cardData.type;
            card.dataset.index = index.toString();

            const inner = document.createElement("div");
            inner.classList.add("memory-card-inner");

            const front = document.createElement("div");
            front.classList.add("memory-card-front");
            front.textContent = cardData.text;

            const back = document.createElement("div");
            back.classList.add("memory-card-back");
            back.textContent = "Tap to flip";

            inner.appendChild(front);
            inner.appendChild(back);
            card.appendChild(inner);

            card.addEventListener("click", handleCardClick);
            return card;
        }

        function initGame() {
            gameGrid.innerHTML = "";
            gameMessage.textContent = "";
            matchesFound = 0;
            attempts = 0;
            firstCard = null;
            secondCard = null;
            lockBoard = false;
            gameStatus.textContent = "Attempts: 0";

            const shuffled = shuffleArray([...pairs]);
            shuffled.forEach((cardData, index) => {
                const cardEl = createCardElement(cardData, index);
                gameGrid.appendChild(cardEl);
            });
        }

        function handleCardClick(e) {
            const card = e.currentTarget;
            if (lockBoard) return;
            if (card === firstCard) return;
            if (card.classList.contains("matched")) return;

            card.classList.add("flipped");

            if (!firstCard) {
                firstCard = card;
                return;
            }

            secondCard = card;
            attempts++;
            gameStatus.textContent = "Attempts: " + attempts;
            checkForMatch();
        }

        function checkForMatch() {
            const isMatch =
                firstCard.dataset.id === secondCard.dataset.id &&
                firstCard.dataset.type !== secondCard.dataset.type;

            if (isMatch) {
                firstCard.classList.add("matched");
                secondCard.classList.add("matched");
                matchesFound++;
                resetTurn();

                if (matchesFound === pairs.length / 2) {
                    gameMessage.textContent = "All pairs matched â€“ leadership approaches revised!";
                }
            } else {
                lockBoard = true;
                setTimeout(() => {
                    firstCard.classList.remove("flipped");
                    secondCard.classList.remove("flipped");
                    resetTurn();
                }, 900);
            }
        }

        function resetTurn() {
            [firstCard, secondCard] = [null, null];
            lockBoard = false;
        }

        restartBtn.addEventListener("click", initGame);

        initGame();
    </script>

</body>

</html>
